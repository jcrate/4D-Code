  // ----------------------------------------------------  // User name (OS): jcrate  // Date and time: 02/09/11, 14:38:42  // ----------------------------------------------------  // Method: HTTP_Process_Response  //   // removes http header from raw http response  //  // ----------------------------------------------------C_LONGINT($0;$responseCode)$responseCode:=0C_POINTER($1;$responsePtr)$responsePtr:=$1C_POINTER($headerPtr)If (Count parameters>=2)C_POINTER($2;$headerPtr)$headerPtr:=$2End if   // ----------------------------------------------------C_LONGINT($pos;$count)C_TEXT($delimiter)C_BLOB($header)ARRAY TEXT($headerRows;0)ARRAY TEXT($pieces;0)  // ----------------------------------------------------$delimiter:="\r\n"$pos:=BLOB_Find_Text_Case (($delimiter*2);$responsePtr;0;MAXLONG)If ($pos>0)COPY BLOB($responsePtr->;$header;0;0;$pos)DELETE FROM BLOB($responsePtr->;0;$pos+Length($delimiter*2))If (Count parameters>=2)If (TYPE_Compare_Dereferenced_Type ($headerPtr;Is BLOB)=1)COPY BLOB($header;$headerPtr->;0;0;BLOB size($header))End if End if   //parse header for response code$count:=BLOB_Parse_to_Arrays_x (->$header;"";$delimiter;->$headerRows)If ($count>0)  //first line contains response code$count:=STR_Parse_to_Array_by_ASCII (->$pieces;$headerRows{1};Space)If ($count>=3)$responseCode:=Num($pieces{2})End if End if End if $0:=$responseCode